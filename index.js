import{A as J,a as f,S as j,R as H,i as I}from"./assets/vendor-D40M51PX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();new J(".accordion-container",{duration:300,showMultiple:!1});const V="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.893%207.44213L19.9727%207.70529C20.0383%207.90391%2019.9831%208.12465%2019.8331%208.26318L14.9865%2012.6316L16.4225%2019.1788C16.4711%2019.3881%2016.3965%2019.6078%2016.233%2019.7367L16.0136%2019.8946C15.9284%2019.9652%2015.8227%2020.0023%2015.7145%2019.9999C15.6231%2020.0019%2015.5332%2019.9763%2015.4552%2019.9262L10.0002%2016.421L4.57514%2019.9262C4.49714%2019.9763%204.40717%2020.0019%204.31585%2019.9999C4.2076%2020.0023%204.10189%2019.9652%204.01668%2019.8946L3.76736%2019.7367C3.60386%2019.6078%203.52926%2019.3881%203.57788%2019.1788L5.01393%2012.6316L0.177238%208.2737C0.0195078%208.136%20-0.0401977%207.90913%200.0276496%207.70529L0.137348%207.44213C0.195676%207.23416%200.371037%207.08693%200.57614%207.07372L6.94861%206.53688L9.39188%200.336955C9.47017%200.131058%209.66039%20-0.0027956%209.87057%200.000116994H10.1298C10.3381%20-0.00454821%2010.5263%200.130692%2010.5985%200.336955L13.0817%206.53688L19.4542%207.07372C19.6593%207.08693%2019.8346%207.23416%2019.893%207.44213ZM14.1089%2016.9052L12.992%2011.9789L16.6519%208.68423L11.8551%208.28423L10.0002%203.58955V14.2631L14.1089%2016.9052Z'%20fill='%23080C09'/%3e%3c/svg%3e",_="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.51603%2014.323L5.02603%2020.775C4.97989%2020.9704%204.99374%2021.1751%205.06577%2021.3625C5.1378%2021.5499%205.26467%2021.7112%205.4298%2021.8253C5.59492%2021.9395%205.79064%2022.0012%205.99138%2022.0024C6.19212%2022.0036%206.38855%2021.9442%206.55503%2021.832L12%2018.202L17.445%2021.832C17.6154%2021.9451%2017.8162%2022.0033%2018.0207%2021.9988C18.2251%2021.9944%2018.4232%2021.9274%2018.5884%2021.8069C18.7536%2021.6865%2018.878%2021.5183%2018.9448%2021.3251C19.0116%2021.1318%2019.0176%2020.9228%2018.962%2020.726L17.133%2014.326L21.669%2010.244C21.8143%2010.1132%2021.9181%209.94266%2021.9674%209.75351C22.0168%209.56436%2022.0097%209.36488%2021.9469%209.17974C21.8841%208.99461%2021.7685%208.83193%2021.6142%208.71183C21.46%208.59173%2021.2739%208.51947%2021.079%208.504L15.378%208.05L12.911%202.589C12.8324%202.41316%2012.7045%202.26384%2012.5428%202.15906C12.3812%202.05429%2012.1927%201.99854%2012%201.99854C11.8074%201.99854%2011.6189%202.05429%2011.4572%202.15906C11.2956%202.26384%2011.1677%202.41316%2011.089%202.589L8.62203%208.05L2.92103%208.503C2.72948%208.51818%202.54636%208.58821%202.39358%208.70473C2.2408%208.82125%202.12482%208.97932%202.05952%209.16003C1.99422%209.34074%201.98236%209.53644%202.02537%209.72371C2.06838%209.91098%202.16443%2010.0819%202.30203%2010.216L6.51603%2014.323ZM9.36903%209.997C9.54752%209.98294%209.71895%209.92112%209.86533%209.81802C10.0117%209.71491%2010.1277%209.57433%2010.201%209.411L12%205.43L13.799%209.411C13.8724%209.57433%2013.9883%209.71491%2014.1347%209.81802C14.2811%209.92112%2014.4525%209.98294%2014.631%209.997L18.603%2010.312L15.332%2013.256C15.048%2013.512%2014.935%2013.906%2015.039%2014.274L16.292%2018.659L12.556%2016.168C12.392%2016.0579%2012.199%2015.9992%2012.0015%2015.9992C11.804%2015.9992%2011.611%2016.0579%2011.447%2016.168L7.54303%2018.771L8.59303%2014.225C8.63153%2014.0578%208.62636%2013.8835%208.57802%2013.7189C8.52969%2013.5543%208.43981%2013.4048%208.31703%2013.285L5.27903%2010.323L9.36903%209.997Z'%20fill='%23080C09'/%3e%3c/svg%3e",D="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.0709%200.648363C9.41464%20-0.216122%2010.5854%20-0.216121%2010.9291%200.648365L12.9579%205.75071C13.1029%206.11516%2013.4306%206.36417%2013.8067%206.39571L19.0727%206.83732C19.9649%206.91215%2020.3267%208.07684%2019.6469%208.68594L15.6348%2012.2809C15.3483%2012.5378%2015.223%2012.9407%2015.3106%2013.3246L16.5364%2018.6999C16.744%2019.6106%2015.7969%2020.3305%2015.033%2019.8424L10.5246%2016.9619C10.2025%2016.7561%209.79752%2016.7561%209.4755%2016.9619L4.967%2019.8424C4.20312%2020.3305%203.25596%2019.6106%203.46364%2018.6999L4.68943%2013.3246C4.77699%2012.9407%204.65183%2012.5378%204.36527%2012.2809L0.353063%208.68594C-0.326719%208.07684%200.0350679%206.91215%200.927293%206.83732L6.19337%206.39571C6.56952%206.36417%206.89717%206.11516%207.04208%205.75071L9.0709%200.648363Z'%20fill='%23080C09'/%3e%3c/svg%3e",Q="https://furniture-store-v2.b.goit.study/api",L={FURNITURES_LIST:"/furnitures",FURNITURE_ITEM:"/furnitures/",CATEGORIES_LIST:"/categories",USERS_ORDER:"/orders",FEEDBACKS:"/feedbacks"};f.defaults.baseURL=Q;async function X(e){const t={category:e};try{return(await f.get(L.FURNITURES_LIST,{params:t})).data.furnitures}catch(o){throw console.error("Failed to fetch furniture list.",o),new Error("Failed to load furniture list.")}}async function Y(e){try{return(await f.get(`${L.FURNITURE_ITEM}${e}`)).data}catch(t){throw console.error("Failed to fetch furniture item.",t),new Error("Item not found.")}}async function ee(e=1){try{const t={type:"popular",limit:4,page:e};return(await f.get(L.FURNITURES_LIST,{params:t})).data.furnitures}catch(t){throw console.error("Failed to fetch popular furniture items:",t),new Error("Failed to load popular items.")}}async function te(e){try{return(await f.post(L.USERS_ORDER,e)).data}catch(t){throw console.error("Failed to post order.",t),new Error("Order submission failed.")}}async function oe(e){try{const t={limit:10,page:e};return(await f.get(L.FEEDBACKS,{params:t})).data.feedbacks}catch(t){throw console.error("Failed to fetch feedbacks.",t),new Error("Fetch feedbacks data error")}}const re=document.querySelector(".feedback-swiper-wrapper"),ne=new j(".feedback-swiper",{direction:"horizontal",loop:!1,slidesPerView:1,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},effect:"slide",grabCursor:!0,freeMode:!0,autoHeight:!1,spaceBetween:24,autoplay:{delay:5e3},pagination:{el:".feedback-pagination",clickable:!0},navigation:{nextEl:".feedback-swiper-button-next",prevEl:".feedback-swiper-button-prev"}});function se(){document.querySelectorAll(".feedback-rating").forEach(e=>{new H(e,{score:e.dataset.score,starSize:20,step:.5,score:e.dataset.score,readOnly:!0,numberMax:5,precision:!1,round:{down:.3,full:.7,up:.8},starOn:D,starHalf:V,starOff:_}).init()})}function ae(e){return e.map(({name:t,descr:o,rate:n})=>`
    <div class="swiper-slide feedback-swiper-slide">
      <div class="feedback-comment-card">
        <div class="feedback-rating" data-score="${n}"></div>
        <p class="feedback-comment-descr">"${o}"</p>
        <h3 class="feedback-comment-name">${t}</h3>
      </div>
    </div>
    `).join(`
`)}function ie(e){re.insertAdjacentHTML("beforeend",ae(e)),se(),ne.update()}let le=1;async function ce(){try{const e=await oe(le);ie(e)}catch(e){console.log(e)}}ce();const b=document.getElementById("global-loader"),h=document.querySelector(".load-more-btn");function de(e=!1){b&&b.classList.remove("hidden"),e&&h&&h.classList.add("loading")}function ue(){b&&b.classList.add("hidden"),h&&h.classList.remove("loading")}const O=document.querySelector(".furniture-list"),pe=document.querySelector(".categories-list-item"),S=document.querySelector(".load-more-btn-furniture");let w=1;const R=8;let x=0,T=0,M=null;async function B(e=1,t=null){de(e>1);try{let o=`https://furniture-store-v2.b.goit.study/api/furnitures?page=${e}&limit=${R}`;t&&t!=="all"&&(o+=`&category=${t}`);const r=await(await fetch(o)).json(),s=r.furnitures;T=r.total,z(s,e===1),x+=s.length,x>=T||s.length<R?S.style.display="none":S.style.display="block"}catch(o){console.error("Error loading furniture:",o)}finally{ue()}}pe.addEventListener("click",e=>{const t=e.target.closest("li[data-category-id]");t&&(M=t.dataset.categoryId,w=1,x=0,B(w,M))});B();S.addEventListener("click",()=>{w++,B(w,M)});const F=document.querySelectorAll(".img-categories");F.forEach(e=>{e.addEventListener("click",()=>{F.forEach(t=>t.classList.remove("active")),e.classList.add("active")})});function z(e,t=!1){const o=e.map(({_id:n,images:r,name:s,color:i,price:p})=>{const g=(r==null?void 0:r[0])||"https://via.placeholder.com/300x200?text=No+Image",y=Array.isArray(i)?i.map(l=>`<span style="display:inline-block;width:24px;height:24px;border-radius:50%;background:${l};margin:0 2px;"></span>`).join(""):"—";return`
        <li class="furniture-item" data-id="${n}">
          <div сlass="furniture-img">
            <img class="furniture-item-img" src="${g}" alt="${s}" style="width: 310px; height: 256px; object-fit: cover; border-radius: 8px;" />
          </div>
          <div class="furniture-information">
            <h3 class="furniture-item-name">${s}</h3>
            <p class="furniture-item-color">${y}</p>
            <p class="furniture-item-price">${p} грн</p>
            <button type="button" class="item-btn" data-id="${n}">Детальніше</button>
          </div>
        </li>
      `}).join("");t?O.innerHTML=o:O.insertAdjacentHTML("beforeend",o)}const u={closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),body:document.querySelector("body"),form:document.querySelector(".modal-form")};u.closeModalBtn.addEventListener("click",Z);u.modal.addEventListener("click",me);window.addEventListener("keydown",fe);u.form.addEventListener("submit",ge);function Z(){u.modal.classList.toggle("is-open"),u.body.classList.toggle("modal-open")}function q(){u.modal.classList.remove("is-open"),u.body.classList.remove("modal-open")}function me(e){e.target===u.modal&&q()}function fe(e){e.key==="Escape"&&u.modal.classList.contains("is-open")&&q()}function ge(e){e.preventDefault();const t=e.currentTarget,{name:o,phone:n,comment:r}=t.elements,s=r.value.trim()||"user didn't leave the commetn";P(o),P(n);let i=!0;const p=o.value.trim();p.length<2&&(A(o,"Будь ласка, введіть правильно ім'я"),i=!1);const g=n.value.trim().replace(/\s+/g,"");/^(\+?38)?0\d{9}$/.test(g)||(A(n,"Невірний формат телефону"),i=!1),i&&te({name:p,phone:g,modelId:C.modelId,color:C.color,comment:s}).then(l=>{console.log(l),I.success({title:"Вітаю!",message:"Ваше замовлення оформлено успішно!",position:"topRight"}),t.reset(),q()}).catch(l=>{console.error("Failed to post order.",l);let m="Сталася невідома помилка. Спробуйте ще раз.";l.message==="Network Error"?m="Немає з’єднання з сервером. Перевірте інтернет і спробуйте знову.":l.response?l.response.status>=500?m="Сервер тимчасово недоступний. Будь ласка, спробуйте пізніше.":l.response.status===400?m="Перевірте правильність заповнення форми.":l.response.status===404&&(m="Сервер не знайдено. Спробуйте пізніше."):l.request&&(m="Відсутня відповідь від сервера. Спробуйте ще раз."),I.error({title:"Помилка",message:m,position:"topRight"})})}function A(e,t){if(e.classList.add("invalid"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-text")){const o=document.createElement("p");o.className="error-text",o.textContent=t,e.insertAdjacentElement("afterend",o)}}function P(e){e.classList.remove("invalid"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-text")&&e.nextElementSibling.remove()}const c={overlay:document.querySelector("[data-modal-item]"),darkOverlay:document.querySelector("#menu-overlay"),closeBtn:document.querySelector("[data-modal-close-furniture]"),contentWrapper:document.querySelector(".modal-content-wrapper"),furnitureList:document.querySelector(".furniture-list")},C={modelId:null,color:null},Le=e=>Array.isArray(e)?e.map(t=>{const o=t.hex||t;return`
            <button 
              class="color-button" 
              data-color="${o}"
              style="
                display:inline-block;
                width:32px;
                height:32px;
                background:${o};
                border-radius:50%;
                margin-right:16px;
                border:2px solid transparent;
                cursor:pointer;"
            ></button>`}).join(""):'<li class="modal-color-item">—</li>';function ye(e){const t=document.querySelector(".product-rating-container");t&&new H(t,{score:e||0,starSize:20,step:.5,readOnly:!0,numberMax:5,precision:!1,round:{down:.3,full:.7,up:.8},starOn:D,starHalf:V,starOff:_}).init()}function ve(){const e=document.querySelectorAll(".color-button");e.forEach(t=>{var n;const o=(n=t.dataset.color)==null?void 0:n.toLowerCase();o==="#fff"||o==="white"?t.style.border="1px solid #838584":t.style.border="3px solid transparent"}),e.forEach(t=>{t.addEventListener("click",o=>{const n=o.currentTarget.dataset.color.toLowerCase();C.color=n,e.forEach(r=>{var i;const s=(i=r.dataset.color)==null?void 0:i.toLowerCase();s==="#fff"||s==="white"?r.style.border="1px solid #838584":r.style.border="3px solid transparent"}),n==="#fff"||n==="white"?o.currentTarget.style.border="2px solid #000":o.currentTarget.style.border="4px solid #838584"})})}function be(e){const{name:t,category:o,price:n,description:r,sizes:s,color:i,images:p}=e;return`
    <div class="product-info-wrapper">
      <div class="modal-gallery-mobile-wrapper">
        ${p.map(y=>`<img src="${y}" alt="${t}" width="260">`).join("")}
      </div>
      <div class="furniture-content">
        <h2 class="modal-product-title">${t}</h2>
        <p class="modal-product-category">${o.name}</p>
        <p class="modal-product-price">${n} грн</p>
        <div class="modal-rating-wrapper">
        <div class="product-rating-container small"></div>
        </div>
        <div class="modal-product-details">
        <h3 class="modal-detail-heading">Колір</h3>
        <ul class="modal-color-list">${Le(i)}</ul>
        <p class="modal-product-description">${r}</p>
        <p class="modal-product-size">Розміри: ${s}</p>
        </div>
        <button type="button" class="modal-order-btn">Перейти до замовлення</button>
      </div>
    </div>
  `}function he(){c.overlay.classList.add("is-open"),c.darkOverlay.classList.add("is-visible"),document.body.classList.add("modal-open")}function v(){c.overlay.classList.remove("is-open"),c.darkOverlay.classList.remove("is-visible"),document.body.classList.remove("modal-open"),c.contentWrapper.innerHTML=""}function we(){c.closeBtn.addEventListener("click",v),c.overlay.addEventListener("click",e=>{e.target===c.overlay&&v()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&v()})}async function K(e){const t=e.target.closest("[data-id]");if(!t)return;const o=t.dataset.id;C.modelId=o;try{const n=await Y(o);c.contentWrapper.innerHTML=be(n),ve(),ye(n.rate);const r=c.contentWrapper.querySelector(".modal-order-btn");r&&r.addEventListener("click",()=>{v(),Z()}),he()}catch(n){console.error("Failed to open modal:",n)}}function Ce(){c.furnitureList.addEventListener("click",K),we()}async function Ee(){try{const e=await X();z(e,!0),Ce()}catch(e){console.error("Init error:",e)}}Ee();const a={openBtn:document.querySelector("#menu-open-btn"),closeBtn:document.querySelector("#menu-close-btn"),mobileMenu:document.querySelector("#mobile-menu-container"),mobaleNavList:document.querySelector("#mobile-nav"),navigation:document.querySelector(".navigation"),overlay:document.querySelector("#menu-overlay"),desktopBtn:document.querySelector("#desktop-btn"),mobileBtn:document.querySelector("#mobile-btn")};a.openBtn.addEventListener("click",ke);a.closeBtn.addEventListener("click",E);document.addEventListener("keydown",Se);document.addEventListener("click",xe);a.desktopBtn.addEventListener("click",G);a.mobileBtn.addEventListener("click",G);function ke(){a.mobileMenu.classList.add("is-open"),a.navigation.classList.add("menu-active"),a.overlay.classList.add("is-visible"),document.body.style.overflow="hidden",a.openBtn.setAttribute("aria-expanded","true")}function E(){a.mobileMenu.classList.remove("is-open"),a.navigation.classList.remove("menu-active"),a.overlay.classList.remove("is-visible"),document.body.style.overflow="",a.openBtn.setAttribute("aria-expanded","false")}a.mobaleNavList.querySelectorAll("a").forEach(e=>{e.addEventListener("click",E)});function W(){a.mobileMenu.classList.contains("is-open")&&E()}function Se(e){e.key==="Escape"&&W()}function xe(e){const t=a.mobileMenu.contains(e.target),o=a.openBtn.contains(e.target);!t&&!o&&W()}function G(){document.querySelector(".furniture-section").scrollIntoView({behavior:"smooth"}),E(),a.btn.blur()}const $=document.getElementById("popular-products-wrapper");let k=1,d;function U(e){return e.map(t=>`
    <div class="swiper-slide">
      <img src="${t.images[0]}" alt="${t.name}" 
            style="width:100%; height:256px; object-fit:cover; border-radius:8px;" />
      <h3 class="product-name">${t.name}</h3>
      <p>
        ${t.color?t.color.map(o=>`<span style="display:inline-block; width:23px; height:23px; border-radius:50%; background:${o}; margin:0 2px;"></span>`).join(""):""}
      </p>
      <p class="product-price">${t.price} грн</p>
      <a class="more-info" data-id="${t._id}">Детальніше</a>
    </div>
  `).join("")}function Me(e){if(d)e.forEach(t=>{const o=document.createElement("div");o.classList.add("swiper-slide"),o.innerHTML=U([t]),d.appendSlide(o)}),d.update();else{$.innerHTML=U(e),d=new j(".popular-swiper",{slidesPerView:1,spaceBetween:10,loop:!0,navigation:{nextEl:".popular-button-next",prevEl:".popular-button-prev",disabledClass:"disabled-nav"},pagination:{el:".popular-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:20},1440:{slidesPerView:4,spaceBetween:20}}});const t=document.querySelector(".popular-button-prev"),o=document.querySelector(".popular-button-next"),n=()=>{t.classList.toggle("disabled-nav",d.isBeginning),o.classList.toggle("disabled-nav",d.isEnd)};d.on("slideChange",n),d.on("init",n),n()}$.querySelectorAll(".more-info").forEach(t=>{t.addEventListener("click",K)})}async function N(e=1){try{const t=await ee(e);if(!t||t.length===0)return;Me(t)}catch(t){console.error("Помилка завантаження популярних товарів:",t),$.innerHTML="<p>Не вдалося завантажити популярні товари.</p>"}}document.addEventListener("DOMContentLoaded",()=>{N(k),document.querySelector(".popular-button-next").addEventListener("click",async()=>{k++,await N(k),d.slideNext()}),document.querySelector(".popular-button-prev").addEventListener("click",()=>{d.slidePrev()})});
//# sourceMappingURL=index.js.map
