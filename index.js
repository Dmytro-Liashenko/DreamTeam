import{A as R,a as y,i as v}from"./assets/vendor-CUKPyHr3.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();new R(".accordion-container",{duration:300,showMultiple:!1});const q="https://furniture-store-v2.b.goit.study/api",E={FURNITURES_LIST:"/furnitures",FURNITURE_ITEM:"/furnitures/",CATEGORIES_LIST:"/categories",USERS_ORDER:"/orders",FEEDBACKS:"/feedbacks"};y.defaults.baseURL=q;async function x(e){const o={category:e};try{return(await y.get(E.FURNITURES_LIST,{params:o})).data.furnitures}catch(n){throw console.error("Failed to fetch furniture list.",n),new Error("Failed to load furniture list.")}}async function O(e){try{return(await y.post(E.USERS_ORDER,e)).data}catch(o){throw console.error("Failed to post order.",o),new Error("Order submission failed.")}}const h=document.querySelector(".load-more-btn");document.querySelector(".categories-list");const k=document.querySelector(".furniture-list");let p=1,S=[];document.addEventListener("DOMContentLoaded",A);async function A(){try{const e=await x();S=e,M(e.slice(0,6))}catch(e){console.error("❌ Помилка запиту до API:",e)}}function M(e){const o=e.map(({_id:n,images:i,name:t,color:r,price:a})=>{const l=(i==null?void 0:i[0])||"https://via.placeholder.com/300x200?text=No+Image",d=Array.isArray(r)?r.map(f=>`
                <span class="color-dot" 
                      style="background:${f}" 
                      title="${f}">
                </span>`).join(""):"<span>—</span>";return`
          <li class="furniture-card" data-id="${n}">
            <img src="${l}" alt="${t}" width="300" height="200" loading="lazy" />
            <h3>${t}</h3>
            <div class="color-list">
              <span>Кольори:</span> ${d}
            </div>
            <p>Ціна: ${a} ₴</p>
          </li>`}).join("");k.insertAdjacentHTML("beforeend",o)}h.addEventListener("click",B);function B(){p++;const e=(p-1)*8,o=p*8,n=S.slice(e,o);if(n.length===0){h.style.display="none";return}M(n)}const c={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),body:document.querySelector("body"),form:document.querySelector(".modal-form")};c.openModalBtn.addEventListener("click",I);c.closeModalBtn.addEventListener("click",I);c.modal.addEventListener("click",F);window.addEventListener("keydown",T);c.form.addEventListener("submit",N);function I(){c.modal.classList.toggle("is-open"),c.body.classList.toggle("modal-open")}function g(){c.modal.classList.remove("is-open"),c.body.classList.remove("modal-open")}function F(e){e.target===c.modal&&g()}function T(e){e.key==="Escape"&&c.modal.classList.contains("is-open")&&g()}function N(e){e.preventDefault();const o=e.currentTarget,{name:n,phone:i,comment:t}=o.elements,r=t.value;b(n),b(i);let a=!0;const l=n.value.trim();l.length<2&&(L(n,"Будь ласка, введіть правильно ім'я"),a=!1);const d=i.value.trim().replace(/\s+/g,"");/^(\+?38)?0\d{9}$/.test(d)||(L(i,"Невірний формат телефону"),a=!1),a&&O({name:l,phone:d,modelId:"",color:"",comment:r}).then(u=>{console.log(u),v.success({title:"Вітаю!",message:"Ваше замовлення оформлено успішно!",position:"topRight"}),o.reset(),g()}).catch(u=>{console.error("Failed to post order.",u.message),v.error({title:"Помилка",message:`${u.message}`,position:"topRight"})})}function L(e,o){if(e.classList.add("invalid"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-text")){const n=document.createElement("p");n.className="error-text",n.textContent=o,e.insertAdjacentElement("afterend",n)}}function b(e){e.classList.remove("invalid"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-text")&&e.nextElementSibling.remove()}const s={openBtn:document.querySelector("#menu-open-btn"),closeBtn:document.querySelector("#menu-close-btn"),mobileMenu:document.querySelector("#mobile-menu-container"),mobaleNavList:document.querySelector("#mobile-nav"),navigation:document.querySelector(".navigation"),overlay:document.querySelector("#menu-overlay"),btn:document.querySelector(".btn-header")};s.openBtn.addEventListener("click",C);s.closeBtn.addEventListener("click",m);document.addEventListener("keydown",U);document.addEventListener("click",$);s.btn.addEventListener("click",P);function C(){s.mobileMenu.classList.add("is-open"),s.navigation.classList.add("menu-active"),s.overlay.classList.add("is-visible"),document.body.style.overflow="hidden",s.openBtn.setAttribute("aria-expanded","true")}function m(){s.mobileMenu.classList.remove("is-open"),s.navigation.classList.remove("menu-active"),s.overlay.classList.remove("is-visible"),document.body.style.overflow="",s.openBtn.setAttribute("aria-expanded","false")}s.mobaleNavList.querySelectorAll("a").forEach(e=>{e.addEventListener("click",m)});function w(){s.mobileMenu.classList.contains("is-open")&&m()}function U(e){e.key==="Escape"&&w()}function $(e){const o=s.mobileMenu.contains(e.target),n=s.openBtn.contains(e.target);!o&&!n&&w()}function P(){document.querySelector("#furniture").scrollIntoView({behavior:"smooth"}),m()}
//# sourceMappingURL=index.js.map
