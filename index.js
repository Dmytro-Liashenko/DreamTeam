import{A as R,a as m,S as I,R as q,i as v}from"./assets/vendor-D40M51PX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();new R(".accordion-container",{duration:300,showMultiple:!1});const x="https://furniture-store-v2.b.goit.study/api",g={FURNITURES_LIST:"/furnitures",FURNITURE_ITEM:"/furnitures/",CATEGORIES_LIST:"/categories",USERS_ORDER:"/orders",FEEDBACKS:"/feedbacks"};m.defaults.baseURL=x;async function B(e){const t={category:e};try{return(await m.get(g.FURNITURES_LIST,{params:t})).data.furnitures}catch(n){throw console.error("Failed to fetch furniture list.",n),new Error("Failed to load furniture list.")}}async function F(e){try{return(await m.post(g.USERS_ORDER,e)).data}catch(t){throw console.error("Failed to post order.",t),new Error("Order submission failed.")}}async function O(e){try{const t={limit:10,page:e};return(await m.get(g.FEEDBACKS,{params:t})).data.feedbacks}catch(t){throw console.error("Failed to fetch feedbacks.",t),new Error("Fetch feedbacks data error")}}const A=document.querySelector(".swiper-wrapper"),C=new I(".swiper",{direction:"horizontal",loop:!1,slidesPerView:1,spaceBetween:48,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},effect:"slide",grabCursor:!0,freeMode:!0,autoHeight:!1,spaceBetween:24,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function $(){document.querySelectorAll(".rating").forEach(e=>{new q(e,{score:e.dataset.score,starSize:20,step:.5,score:e.dataset.score,readOnly:!0,numberMax:5,precision:!1,round:{down:.3,full:.7,up:.8},path:"./img/star-icons",starOn:"star-full.png",starHalf:"star-half.png",starOff})})}function T(e){return e.map(({name:t,descr:n,rate:i})=>`
    <div class="swiper-slide">
      <div class="comment-card">
        <div class="rating" data-score="${i}"></div>
        <p class="comment-descr">"${n}"</p>
        <h3 class="comment-name">${t}</h3>
      </div>
    </div>
    `).join(`
`)}function P(e){A.insertAdjacentHTML("beforeend",T(e)),$(),C.update()}let N=1;async function U(){try{const e=await O(N);P(e)}catch(e){console.log(e)}}U();const L=document.querySelector(".load-more-btn");document.querySelector(".categories-list");const _=document.querySelector(".furniture-list");let y=1,S=[];document.addEventListener("DOMContentLoaded",D);async function D(){try{const e=await B();S=e,w(e.slice(0,6))}catch(e){console.error("❌ Помилка запиту до API:",e)}}function w(e){const t=e.map(({_id:n,images:i,name:o,color:r,price:c})=>{const l=(i==null?void 0:i[0])||"https://via.placeholder.com/300x200?text=No+Image",d=Array.isArray(r)?r.map(p=>`
                <span class="color-dot" 
                      style="background:${p}" 
                      title="${p}">
                </span>`).join(""):"<span>—</span>";return`
          <li class="furniture-card" data-id="${n}">
            <img src="${l}" alt="${o}" width="300" height="200" loading="lazy" />
            <h3>${o}</h3>
            <div class="color-list">
              <span>Кольори:</span> ${d}
            </div>
            <p>Ціна: ${c} ₴</p>
          </li>`}).join("");_.insertAdjacentHTML("beforeend",t)}L.addEventListener("click",V);function V(){y++;const e=(y-1)*8,t=y*8,n=S.slice(e,t);if(n.length===0){L.style.display="none";return}w(n)}const a={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),body:document.querySelector("body"),form:document.querySelector(".modal-form")};a.openModalBtn.addEventListener("click",M);a.closeModalBtn.addEventListener("click",M);a.modal.addEventListener("click",j);window.addEventListener("keydown",z);a.form.addEventListener("submit",H);function M(){a.modal.classList.toggle("is-open"),a.body.classList.toggle("modal-open")}function b(){a.modal.classList.remove("is-open"),a.body.classList.remove("modal-open")}function j(e){e.target===a.modal&&b()}function z(e){e.key==="Escape"&&a.modal.classList.contains("is-open")&&b()}function H(e){e.preventDefault();const t=e.currentTarget,{name:n,phone:i,comment:o}=t.elements,r=o.value;E(n),E(i);let c=!0;const l=n.value.trim();l.length<2&&(h(n,"Будь ласка, введіть правильно ім'я"),c=!1);const d=i.value.trim().replace(/\s+/g,"");/^(\+?38)?0\d{9}$/.test(d)||(h(i,"Невірний формат телефону"),c=!1),c&&F({name:l,phone:d,modelId:"",color:"",comment:r}).then(u=>{console.log(u),v.success({title:"Вітаю!",message:"Ваше замовлення оформлено успішно!",position:"topRight"}),t.reset(),b()}).catch(u=>{console.error("Failed to post order.",u.message),v.error({title:"Помилка",message:`${u.message}`,position:"topRight"})})}function h(e,t){if(e.classList.add("invalid"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-text")){const n=document.createElement("p");n.className="error-text",n.textContent=t,e.insertAdjacentElement("afterend",n)}}function E(e){e.classList.remove("invalid"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-text")&&e.nextElementSibling.remove()}const s={openBtn:document.querySelector("#menu-open-btn"),closeBtn:document.querySelector("#menu-close-btn"),mobileMenu:document.querySelector("#mobile-menu-container"),mobaleNavList:document.querySelector("#mobile-nav"),navigation:document.querySelector(".navigation"),overlay:document.querySelector("#menu-overlay"),btn:document.querySelector(".btn-header")};s.openBtn.addEventListener("click",K);s.closeBtn.addEventListener("click",f);document.addEventListener("keydown",G);document.addEventListener("click",J);s.btn.addEventListener("click",Q);function K(){s.mobileMenu.classList.add("is-open"),s.navigation.classList.add("menu-active"),s.overlay.classList.add("is-visible"),document.body.style.overflow="hidden",s.openBtn.setAttribute("aria-expanded","true")}function f(){s.mobileMenu.classList.remove("is-open"),s.navigation.classList.remove("menu-active"),s.overlay.classList.remove("is-visible"),document.body.style.overflow="",s.openBtn.setAttribute("aria-expanded","false")}s.mobaleNavList.querySelectorAll("a").forEach(e=>{e.addEventListener("click",f)});function k(){s.mobileMenu.classList.contains("is-open")&&f()}function G(e){e.key==="Escape"&&k()}function J(e){const t=s.mobileMenu.contains(e.target),n=s.openBtn.contains(e.target);!t&&!n&&k()}function Q(){document.querySelector("#furniture").scrollIntoView({behavior:"smooth"}),f()}
//# sourceMappingURL=index.js.map
