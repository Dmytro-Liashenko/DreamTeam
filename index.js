import{A as R,a as y,S as q,R as x,i as v}from"./assets/vendor-D40M51PX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();new R(".accordion-container",{duration:300,showMultiple:!1});const A="https://furniture-store-v2.b.goit.study/api",S={FURNITURES_LIST:"/furnitures",FURNITURE_ITEM:"/furnitures/",CATEGORIES_LIST:"/categories",USERS_ORDER:"/orders",FEEDBACKS:"/feedbacks"};y.defaults.baseURL=A;async function O(e){try{return(await y.post(S.USERS_ORDER,e)).data}catch(t){throw console.error("Failed to post order.",t),new Error("Order submission failed.")}}async function $(e){try{const t={limit:10,page:e};return(await y.get(S.FEEDBACKS,{params:t})).data.feedbacks}catch(t){throw console.error("Failed to fetch feedbacks.",t),new Error("Fetch feedbacks data error")}}const I=document.querySelector(".swiper-wrapper"),F=new q(".swiper",{direction:"horizontal",loop:!1,slidesPerView:1,spaceBetween:48,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},effect:"slide",grabCursor:!0,freeMode:!0,autoHeight:!1,spaceBetween:24,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function C(){document.querySelectorAll(".rating").forEach(e=>{new x(e,{score:e.dataset.score,starSize:20,step:.5,score:e.dataset.score,readOnly:!0,numberMax:5,precision:!1,round:{down:.3,full:.7,up:.8},path:"./img/star-icons",starOn:"star-full.png",starHalf:"star-half.png",starOff})})}function P(e){return e.map(({name:t,descr:n,rate:s})=>`
    <div class="swiper-slide">
      <div class="comment-card">
        <div class="rating" data-score="${s}"></div>
        <p class="comment-descr">"${n}"</p>
        <h3 class="comment-name">${t}</h3>
      </div>
    </div>
    `).join(`
`)}function T(e){I.insertAdjacentHTML("beforeend",P(e)),C(),F.update()}let N=1;async function U(){try{const e=await $(N);T(e)}catch(e){console.log(e)}}U();const V=document.querySelector(".furniture-list"),w=document.querySelector(".load-more-btn");let h=1;const _=8;let f=0,g=0;async function M(e=1){try{const n=await(await fetch(`https://furniture-store-v2.b.goit.study/api/furnitures?page=${e}&limit=${_}`)).json(),s=n.furnitures;g=n.total,j(s),f+=s.length,console.log(`Завантажено: ${f}/${g}`),f>=g&&(w.style.display="none")}catch(t){console.error("❌ Помилка при завантаженні меблів:",t)}}function j(e){const t=e.map(({_id:n,images:s,name:o,color:r,price:c})=>{const l=(s==null?void 0:s[0])||"https://via.placeholder.com/300x200?text=No+Image",d=Array.isArray(r)?r.map(p=>`
                <span class="color-dot" 
                      style="background:${p}" 
                      title="${p}">
                </span>`).join(""):"<span>—</span>";return`
          <li class="furniture-card" data-id="${n}">
            <img class="img-card" src="${l}" alt="${o}" width="300" height="200" loading="lazy" />
            <h3>${o}</h3>
            <div class="color-list">
              <span>Кольори:</span> ${d}
            </div>
            <p>Ціна: ${c} ₴</p>
            <button class="btn-card">Детальніше</button>
             </li>`}).join("");V.insertAdjacentHTML("beforeend",t)}w.addEventListener("click",()=>{h++,M(h)});M();const i={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),body:document.querySelector("body"),form:document.querySelector(".modal-form")};i.openModalBtn.addEventListener("click",k);i.closeModalBtn.addEventListener("click",k);i.modal.addEventListener("click",D);window.addEventListener("keydown",z);i.form.addEventListener("submit",H);function k(){i.modal.classList.toggle("is-open"),i.body.classList.toggle("modal-open")}function b(){i.modal.classList.remove("is-open"),i.body.classList.remove("modal-open")}function D(e){e.target===i.modal&&b()}function z(e){e.key==="Escape"&&i.modal.classList.contains("is-open")&&b()}function H(e){e.preventDefault();const t=e.currentTarget,{name:n,phone:s,comment:o}=t.elements,r=o.value;L(n),L(s);let c=!0;const l=n.value.trim();l.length<2&&(E(n,"Будь ласка, введіть правильно ім'я"),c=!1);const d=s.value.trim().replace(/\s+/g,"");/^(\+?38)?0\d{9}$/.test(d)||(E(s,"Невірний формат телефону"),c=!1),c&&O({name:l,phone:d,modelId:"",color:"",comment:r}).then(u=>{console.log(u),v.success({title:"Вітаю!",message:"Ваше замовлення оформлено успішно!",position:"topRight"}),t.reset(),b()}).catch(u=>{console.error("Failed to post order.",u.message),v.error({title:"Помилка",message:`${u.message}`,position:"topRight"})})}function E(e,t){if(e.classList.add("invalid"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-text")){const n=document.createElement("p");n.className="error-text",n.textContent=t,e.insertAdjacentElement("afterend",n)}}function L(e){e.classList.remove("invalid"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-text")&&e.nextElementSibling.remove()}const a={openBtn:document.querySelector("#menu-open-btn"),closeBtn:document.querySelector("#menu-close-btn"),mobileMenu:document.querySelector("#mobile-menu-container"),mobaleNavList:document.querySelector("#mobile-nav"),navigation:document.querySelector(".navigation"),overlay:document.querySelector("#menu-overlay"),btn:document.querySelector(".btn-header")};a.openBtn.addEventListener("click",K);a.closeBtn.addEventListener("click",m);document.addEventListener("keydown",G);document.addEventListener("click",J);a.btn.addEventListener("click",Q);function K(){a.mobileMenu.classList.add("is-open"),a.navigation.classList.add("menu-active"),a.overlay.classList.add("is-visible"),document.body.style.overflow="hidden",a.openBtn.setAttribute("aria-expanded","true")}function m(){a.mobileMenu.classList.remove("is-open"),a.navigation.classList.remove("menu-active"),a.overlay.classList.remove("is-visible"),document.body.style.overflow="",a.openBtn.setAttribute("aria-expanded","false")}a.mobaleNavList.querySelectorAll("a").forEach(e=>{e.addEventListener("click",m)});function B(){a.mobileMenu.classList.contains("is-open")&&m()}function G(e){e.key==="Escape"&&B()}function J(e){const t=a.mobileMenu.contains(e.target),n=a.openBtn.contains(e.target);!t&&!n&&B()}function Q(){document.querySelector("#furniture").scrollIntoView({behavior:"smooth"}),m()}
//# sourceMappingURL=index.js.map
