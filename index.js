import{A as _,a as f,S as U,R as D,i as $}from"./assets/vendor-D40M51PX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();new _(".accordion-container",{duration:300,showMultiple:!1});const z="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.893%207.44213L19.9727%207.70529C20.0383%207.90391%2019.9831%208.12465%2019.8331%208.26318L14.9865%2012.6316L16.4225%2019.1788C16.4711%2019.3881%2016.3965%2019.6078%2016.233%2019.7367L16.0136%2019.8946C15.9284%2019.9652%2015.8227%2020.0023%2015.7145%2019.9999C15.6231%2020.0019%2015.5332%2019.9763%2015.4552%2019.9262L10.0002%2016.421L4.57514%2019.9262C4.49714%2019.9763%204.40717%2020.0019%204.31585%2019.9999C4.2076%2020.0023%204.10189%2019.9652%204.01668%2019.8946L3.76736%2019.7367C3.60386%2019.6078%203.52926%2019.3881%203.57788%2019.1788L5.01393%2012.6316L0.177238%208.2737C0.0195078%208.136%20-0.0401977%207.90913%200.0276496%207.70529L0.137348%207.44213C0.195676%207.23416%200.371037%207.08693%200.57614%207.07372L6.94861%206.53688L9.39188%200.336955C9.47017%200.131058%209.66039%20-0.0027956%209.87057%200.000116994H10.1298C10.3381%20-0.00454821%2010.5263%200.130692%2010.5985%200.336955L13.0817%206.53688L19.4542%207.07372C19.6593%207.08693%2019.8346%207.23416%2019.893%207.44213ZM14.1089%2016.9052L12.992%2011.9789L16.6519%208.68423L11.8551%208.28423L10.0002%203.58955V14.2631L14.1089%2016.9052Z'%20fill='%23080C09'/%3e%3c/svg%3e",Z="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.51603%2014.323L5.02603%2020.775C4.97989%2020.9704%204.99374%2021.1751%205.06577%2021.3625C5.1378%2021.5499%205.26467%2021.7112%205.4298%2021.8253C5.59492%2021.9395%205.79064%2022.0012%205.99138%2022.0024C6.19212%2022.0036%206.38855%2021.9442%206.55503%2021.832L12%2018.202L17.445%2021.832C17.6154%2021.9451%2017.8162%2022.0033%2018.0207%2021.9988C18.2251%2021.9944%2018.4232%2021.9274%2018.5884%2021.8069C18.7536%2021.6865%2018.878%2021.5183%2018.9448%2021.3251C19.0116%2021.1318%2019.0176%2020.9228%2018.962%2020.726L17.133%2014.326L21.669%2010.244C21.8143%2010.1132%2021.9181%209.94266%2021.9674%209.75351C22.0168%209.56436%2022.0097%209.36488%2021.9469%209.17974C21.8841%208.99461%2021.7685%208.83193%2021.6142%208.71183C21.46%208.59173%2021.2739%208.51947%2021.079%208.504L15.378%208.05L12.911%202.589C12.8324%202.41316%2012.7045%202.26384%2012.5428%202.15906C12.3812%202.05429%2012.1927%201.99854%2012%201.99854C11.8074%201.99854%2011.6189%202.05429%2011.4572%202.15906C11.2956%202.26384%2011.1677%202.41316%2011.089%202.589L8.62203%208.05L2.92103%208.503C2.72948%208.51818%202.54636%208.58821%202.39358%208.70473C2.2408%208.82125%202.12482%208.97932%202.05952%209.16003C1.99422%209.34074%201.98236%209.53644%202.02537%209.72371C2.06838%209.91098%202.16443%2010.0819%202.30203%2010.216L6.51603%2014.323ZM9.36903%209.997C9.54752%209.98294%209.71895%209.92112%209.86533%209.81802C10.0117%209.71491%2010.1277%209.57433%2010.201%209.411L12%205.43L13.799%209.411C13.8724%209.57433%2013.9883%209.71491%2014.1347%209.81802C14.2811%209.92112%2014.4525%209.98294%2014.631%209.997L18.603%2010.312L15.332%2013.256C15.048%2013.512%2014.935%2013.906%2015.039%2014.274L16.292%2018.659L12.556%2016.168C12.392%2016.0579%2012.199%2015.9992%2012.0015%2015.9992C11.804%2015.9992%2011.611%2016.0579%2011.447%2016.168L7.54303%2018.771L8.59303%2014.225C8.63153%2014.0578%208.62636%2013.8835%208.57802%2013.7189C8.52969%2013.5543%208.43981%2013.4048%208.31703%2013.285L5.27903%2010.323L9.36903%209.997Z'%20fill='%23080C09'/%3e%3c/svg%3e",K="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.0709%200.648363C9.41464%20-0.216122%2010.5854%20-0.216121%2010.9291%200.648365L12.9579%205.75071C13.1029%206.11516%2013.4306%206.36417%2013.8067%206.39571L19.0727%206.83732C19.9649%206.91215%2020.3267%208.07684%2019.6469%208.68594L15.6348%2012.2809C15.3483%2012.5378%2015.223%2012.9407%2015.3106%2013.3246L16.5364%2018.6999C16.744%2019.6106%2015.7969%2020.3305%2015.033%2019.8424L10.5246%2016.9619C10.2025%2016.7561%209.79752%2016.7561%209.4755%2016.9619L4.967%2019.8424C4.20312%2020.3305%203.25596%2019.6106%203.46364%2018.6999L4.68943%2013.3246C4.77699%2012.9407%204.65183%2012.5378%204.36527%2012.2809L0.353063%208.68594C-0.326719%208.07684%200.0350679%206.91215%200.927293%206.83732L6.19337%206.39571C6.56952%206.36417%206.89717%206.11516%207.04208%205.75071L9.0709%200.648363Z'%20fill='%23080C09'/%3e%3c/svg%3e",W="https://furniture-store-v2.b.goit.study/api",g={FURNITURES_LIST:"/furnitures",FURNITURE_ITEM:"/furnitures/",CATEGORIES_LIST:"/categories",USERS_ORDER:"/orders",FEEDBACKS:"/feedbacks"};f.defaults.baseURL=W;async function G(e){const t={category:e};try{return(await f.get(g.FURNITURES_LIST,{params:t})).data.furnitures}catch(o){throw console.error("Failed to fetch furniture list.",o),new Error("Failed to load furniture list.")}}async function J(e){try{return(await f.get(`${g.FURNITURE_ITEM}${e}`)).data}catch(t){throw console.error("Failed to fetch furniture item.",t),new Error("Item not found.")}}async function Q(e=1){try{const t={type:"popular",limit:4,page:e};return(await f.get(g.FURNITURES_LIST,{params:t})).data.furnitures}catch(t){throw console.error("Failed to fetch popular furniture items:",t),new Error("Failed to load popular items.")}}async function X(e){try{return(await f.post(g.USERS_ORDER,e)).data}catch(t){throw console.error("Failed to post order.",t),new Error("Order submission failed.")}}async function Y(e){try{const t={limit:10,page:e};return(await f.get(g.FEEDBACKS,{params:t})).data.feedbacks}catch(t){throw console.error("Failed to fetch feedbacks.",t),new Error("Fetch feedbacks data error")}}const ee=document.querySelector(".swiper-wrapper"),te=new U(".swiper",{direction:"horizontal",loop:!1,slidesPerView:1,spaceBetween:48,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},effect:"slide",grabCursor:!0,freeMode:!0,autoHeight:!1,spaceBetween:24,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function oe(){document.querySelectorAll(".rating").forEach(e=>{new D(e,{score:e.dataset.score,starSize:20,step:.5,score:e.dataset.score,readOnly:!0,numberMax:5,precision:!1,round:{down:.3,full:.7,up:.8},starOn:K,starHalf:z,starOff:Z}).init()})}function re(e){return e.map(({name:t,descr:o,rate:n})=>`
    <div class="swiper-slide">
      <div class="comment-card">
        <div class="rating" data-score="${n}"></div>
        <p class="comment-descr">"${o}"</p>
        <h3 class="comment-name">${t}</h3>
      </div>
    </div>
    `).join(`
`)}function ne(e){ee.insertAdjacentHTML("beforeend",re(e)),oe(),te.update()}let se=1;async function ie(){try{const e=await Y(se);ne(e)}catch(e){console.log(e)}}ie();const v=document.getElementById("global-loader"),y=document.querySelector(".load-more-btn");function ae(e=!1){v&&v.classList.remove("hidden"),e&&y&&y.classList.add("loading")}function ce(){v&&v.classList.add("hidden"),y&&y.classList.remove("loading")}const q=document.querySelector(".furniture-list"),le=document.querySelector(".categories-list-item"),E=document.querySelector(".load-more-btn");let h=1;const I=8;let S=0,F=0,k=null;async function x(e=1,t=null){ae(e>1);try{let o=`https://furniture-store-v2.b.goit.study/api/furnitures?page=${e}&limit=${I}`;t&&t!=="all"&&(o+=`&category=${t}`);const r=await(await fetch(o)).json(),s=r.furnitures;F=r.total,N(s,e===1),S+=s.length,S>=F||s.length<I?E.style.display="none":E.style.display="block"}catch(o){console.error("Error loading furniture:",o)}finally{ce()}}le.addEventListener("click",e=>{const t=e.target.closest("li[data-category-id]");t&&(k=t.dataset.categoryId,h=1,S=0,x(h,k))});x();E.addEventListener("click",()=>{h++,x(h,k)});const R=document.querySelectorAll(".img-categories");R.forEach(e=>{e.addEventListener("click",()=>{R.forEach(t=>t.classList.remove("active")),e.classList.add("active")})});function N(e,t=!1){const o=e.map(({_id:n,images:r,name:s,color:a,price:p})=>{const m=(r==null?void 0:r[0])||"https://via.placeholder.com/300x200?text=No+Image",L=Array.isArray(a)?a.map(c=>`<span style="display:inline-block;width:24px;height:24px;border-radius:50%;background:${c};margin:0 2px;"></span>`).join(""):"—";return`
        <li class="furniture-item" data-id="${n}">
          <img class="furniture-item-img" src="${m}" alt="${s}" style="width: 310px; height: 256px; object-fit: cover; border-radius: 8px;" />
          <h3 class="furniture-item-name">${s}</h3>
          <p class="furniture-item-color">${L}</p>
          <p class="furniture-item-price">${p} грн</p>
          <button type="button" class="item-btn" data-id="${n}">Детальніше</button>
        </li>
      `}).join("");t?q.innerHTML=o:q.insertAdjacentHTML("beforeend",o)}const u={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),body:document.querySelector("body"),form:document.querySelector(".modal-form")};u.openModalBtn.addEventListener("click",M);u.closeModalBtn.addEventListener("click",M);u.modal.addEventListener("click",de);window.addEventListener("keydown",ue);u.form.addEventListener("submit",pe);function M(){u.modal.classList.toggle("is-open"),u.body.classList.toggle("modal-open")}function B(){u.modal.classList.remove("is-open"),u.body.classList.remove("modal-open")}function de(e){e.target===u.modal&&B()}function ue(e){e.key==="Escape"&&u.modal.classList.contains("is-open")&&B()}function pe(e){e.preventDefault();const t=e.currentTarget,{name:o,phone:n,comment:r}=t.elements,s=r.value;T(o),T(n);let a=!0;const p=o.value.trim();p.length<2&&(O(o,"Будь ласка, введіть правильно ім'я"),a=!1);const m=n.value.trim().replace(/\s+/g,"");/^(\+?38)?0\d{9}$/.test(m)||(O(n,"Невірний формат телефону"),a=!1),a&&X({name:p,phone:m,modelId:"",color:"",comment:s}).then(c=>{console.log(c),$.success({title:"Вітаю!",message:"Ваше замовлення оформлено успішно!",position:"topRight"}),t.reset(),B()}).catch(c=>{console.error("Failed to post order.",c.message),$.error({title:"Помилка",message:`${c.message}`,position:"topRight"})})}function O(e,t){if(e.classList.add("invalid"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-text")){const o=document.createElement("p");o.className="error-text",o.textContent=t,e.insertAdjacentElement("afterend",o)}}function T(e){e.classList.remove("invalid"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-text")&&e.nextElementSibling.remove()}const l={overlay:document.querySelector("[data-modal-item]"),darkOverlay:document.querySelector("#menu-overlay"),closeBtn:document.querySelector("[data-modal-close]"),contentWrapper:document.querySelector(".modal-content-wrapper"),furnitureList:document.querySelector(".furniture-list")};function me(e){const{name:t,category:o,price:n,description:r,sizes:s,color:a,images:p}=e,m=p.map(c=>`<img src="${c}" alt="${t}" width="260">`).join(""),L=Array.isArray(a)?a.map(c=>`<span style="display:inline-block;width:32px;height:32px;background:${c.hex||c};border-radius:50%;margin-right:16px"></span>`).join(""):'<li class="modal-color-item">—</li>';return`
    <div class="product-info-wrapper">
      <div class="modal-gallery-mobile-wrapper">
        ${m}
      </div>
      <h2 class="modal-product-title">${t}</h2>
      <p class="modal-product-category">${o.name}</p>
      <p class="modal-product-price">${n} грн</p>
      <div class="modal-rating-wrapper">
        <div id="product-rating-container"></div>
      </div>
      <div class="modal-product-details">
        <h3 class="modal-detail-heading">Колір</h3>
        <ul class="modal-color-list">${L}</ul>
        <p class="modal-product-description">${r}</p>
        <p class="modal-product-size">Розміри: ${s}</p>
      </div>
      <button type="button" class="modal-order-btn">Перейти до замовлення</button>
    </div>
  `}function fe(){l.overlay.classList.add("is-open"),l.darkOverlay.classList.add("is-visible"),document.body.classList.add("modal-open")}function w(){l.overlay.classList.remove("is-open"),l.darkOverlay.classList.remove("is-visible"),document.body.classList.remove("modal-open"),l.contentWrapper.innerHTML=""}function ge(){l.closeBtn.addEventListener("click",w),l.overlay.addEventListener("click",e=>{e.target===l.overlay&&w()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&w()})}async function Le(e){const t=e.target.closest(".item-btn");if(!t)return;const o=t.dataset.id;try{const n=await J(o);l.contentWrapper.innerHTML=me(n);const r=l.contentWrapper.querySelector(".modal-order-btn");r&&r.addEventListener("click",()=>{M()}),fe()}catch(n){console.error("Failed to open modal:",n)}}function ve(){l.furnitureList.addEventListener("click",Le),ge()}async function ye(){try{const e=await G();N(e,!0),ve()}catch(e){console.error("Init error:",e)}}ye();const i={openBtn:document.querySelector("#menu-open-btn"),closeBtn:document.querySelector("#menu-close-btn"),mobileMenu:document.querySelector("#mobile-menu-container"),mobaleNavList:document.querySelector("#mobile-nav"),navigation:document.querySelector(".navigation"),overlay:document.querySelector("#menu-overlay"),desktopBtn:document.querySelector("#desktop-btn"),mobileBtn:document.querySelector("#mobile-btn")};i.openBtn.addEventListener("click",he);i.closeBtn.addEventListener("click",b);document.addEventListener("keydown",be);document.addEventListener("click",we);i.desktopBtn.addEventListener("click",V);i.mobileBtn.addEventListener("click",V);function he(){i.mobileMenu.classList.add("is-open"),i.navigation.classList.add("menu-active"),i.overlay.classList.add("is-visible"),document.body.style.overflow="hidden",i.openBtn.setAttribute("aria-expanded","true")}function b(){i.mobileMenu.classList.remove("is-open"),i.navigation.classList.remove("menu-active"),i.overlay.classList.remove("is-visible"),document.body.style.overflow="",i.openBtn.setAttribute("aria-expanded","false")}i.mobaleNavList.querySelectorAll("a").forEach(e=>{e.addEventListener("click",b)});function j(){i.mobileMenu.classList.contains("is-open")&&b()}function be(e){e.key==="Escape"&&j()}function we(e){const t=i.mobileMenu.contains(e.target),o=i.openBtn.contains(e.target);!t&&!o&&j()}function V(){document.querySelector(".furniture-section").scrollIntoView({behavior:"smooth"}),b(),i.btn.blur()}const H=document.getElementById("popular-products-wrapper");let C=1,d;function P(e){return e.map(t=>`
    <div class="swiper-slide">
      <img src="${t.images[0]}" alt="${t.name}" 
           style="width:100%; height:256px; object-fit:cover; border-radius:8px;" />
      <h3 class="product-name">${t.name}</h3>
      <p>
        ${t.colors?t.colors.map(o=>`<span style="display:inline-block; width:12px; height:12px; border-radius:50%; background:${o}; margin:0 2px;"></span>`).join(""):""}
      </p>
      <p class="product-price">${t.price} грн</p>
      <a class="more-info" href="/product/${t.id}">Детальніше</a>
    </div>
  `).join("")}function Ce(e){if(d)e.forEach(t=>{const o=document.createElement("div");o.classList.add("swiper-slide"),o.innerHTML=P([t]),d.appendSlide(o)}),d.update();else{H.innerHTML=P(e),d=new U(".popular-swiper",{slidesPerView:3,spaceBetween:20,loop:!1,navigation:{nextEl:".popular-button-next",prevEl:".popular-button-prev",disabledClass:"disabled-nav"},pagination:{el:".popular-pagination",clickable:!0},breakpoints:{320:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:15},1024:{slidesPerView:3,spaceBetween:20}}});const t=document.querySelector(".popular-button-prev"),o=document.querySelector(".popular-button-next"),n=()=>{t.classList.toggle("disabled-nav",d.isBeginning),o.classList.toggle("disabled-nav",d.isEnd)};d.on("slideChange",n),d.on("init",n),n()}}async function A(e=1){try{const t=await Q(e);if(!t||t.length===0)return;Ce(t)}catch(t){console.error("Помилка завантаження популярних товарів:",t),H.innerHTML="<p>Не вдалося завантажити популярні товари.</p>"}}document.addEventListener("DOMContentLoaded",()=>{A(C),document.querySelector(".popular-button-next").addEventListener("click",async()=>{C++,await A(C),d.slideNext()}),document.querySelector(".popular-button-prev").addEventListener("click",()=>{d.slidePrev()})});
//# sourceMappingURL=index.js.map
