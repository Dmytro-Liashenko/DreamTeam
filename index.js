import{A as T,a as p,S as P,R as N,i as $}from"./assets/vendor-D40M51PX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();new T(".accordion-container",{duration:300,showMultiple:!1});const U="https://furniture-store-v2.b.goit.study/api",b={FURNITURES_LIST:"/furnitures",FURNITURE_ITEM:"/furnitures/",CATEGORIES_LIST:"/categories",USERS_ORDER:"/orders",FEEDBACKS:"/feedbacks"};p.defaults.baseURL=U;async function j(e){const t={category:e};try{return(await p.get(b.FURNITURES_LIST,{params:t})).data.furnitures}catch(o){throw console.error("Failed to fetch furniture list.",o),new Error("Failed to load furniture list.")}}async function _(e){try{return(await p.get(`${b.FURNITURE_ITEM}${e}`)).data}catch(t){throw console.error("Failed to fetch furniture item.",t),new Error("Item not found.")}}async function D(e){try{return(await p.post(b.USERS_ORDER,e)).data}catch(t){throw console.error("Failed to post order.",t),new Error("Order submission failed.")}}async function V(e){try{const t={limit:10,page:e};return(await p.get(b.FEEDBACKS,{params:t})).data.feedbacks}catch(t){throw console.error("Failed to fetch feedbacks.",t),new Error("Fetch feedbacks data error")}}const H=document.querySelector(".swiper-wrapper"),z=new P(".swiper",{direction:"horizontal",loop:!1,slidesPerView:1,spaceBetween:48,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},effect:"slide",grabCursor:!0,freeMode:!0,autoHeight:!1,spaceBetween:24,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function K(){document.querySelectorAll(".rating").forEach(e=>{new N(e,{score:e.dataset.score,starSize:20,step:.5,score:e.dataset.score,readOnly:!0,numberMax:5,precision:!1,round:{down:.3,full:.7,up:.8},starOn:"./img/star-icons/star-on.svg",starHalf:"./img/star-icons/star-half.svg",starOff:"./img/star-icons/star-off.svg"}).init()})}function W(e){return e.map(({name:t,descr:o,rate:s})=>`
    <div class="swiper-slide">
      <div class="comment-card">
        <div class="rating" data-score="${s}"></div>
        <p class="comment-descr">"${o}"</p>
        <h3 class="comment-name">${t}</h3>
      </div>
    </div>
    `).join(`
`)}function G(e){H.insertAdjacentHTML("beforeend",W(e)),K(),z.update()}let J=1;async function Q(){try{const e=await V(J);G(e)}catch(e){console.log(e)}}Q();const y=document.getElementById("global-loader"),g=document.querySelector(".load-more-btn");function X(e=!1){y&&y.classList.remove("hidden"),e&&g&&g.classList.add("loading")}function Y(){y&&y.classList.add("hidden"),g&&g.classList.remove("loading")}const x=document.querySelector(".furniture-list"),Z=document.querySelector(".categories-list-item"),E=document.querySelector(".load-more-btn");let v=1;const q=8;let w=0,B=0,S=null;async function k(e=1,t=null){X(e>1);try{let o=`https://furniture-store-v2.b.goit.study/api/furnitures?page=${e}&limit=${q}`;t&&t!=="all"&&(o+=`&category=${t}`);const r=await(await fetch(o)).json(),n=r.furnitures;B=r.total,O(n,e===1),w+=n.length,w>=B||n.length<q?E.style.display="none":E.style.display="block"}catch(o){console.error("Error loading furniture:",o)}finally{Y()}}Z.addEventListener("click",e=>{const t=e.target.closest("li[data-category-id]");t&&(S=t.dataset.categoryId,v=1,w=0,k(v,S))});k();E.addEventListener("click",()=>{v++,k(v,S)});const R=document.querySelectorAll(".img-categories");R.forEach(e=>{e.addEventListener("click",()=>{R.forEach(t=>t.classList.remove("active")),e.classList.add("active")})});function O(e,t=!1){const o=e.map(({_id:s,images:r,name:n,color:i,price:u})=>{const m=(r==null?void 0:r[0])||"https://via.placeholder.com/300x200?text=No+Image",f=Array.isArray(i)?i.map(c=>`<span style="display:inline-block;width:24px;height:24px;border-radius:50%;background:${c};margin:0 2px;"></span>`).join(""):"—";return`
        <li class="furniture-item" data-id="${s}">
          <img class="furniture-item-img" src="${m}" alt="${n}" style="width: 310px; height: 256px; object-fit: cover; border-radius: 8px;" />
          <h3 class="furniture-item-name">${n}</h3>
          <p class="furniture-item-color">${f}</p>
          <p class="furniture-item-price">${u} грн</p>
          <button type="button" class="item-btn" data-id="${s}">Детальніше</button>
        </li>
      `}).join("");t?x.innerHTML=o:x.insertAdjacentHTML("beforeend",o)}const d={overlay:document.querySelector("[data-modal-item]"),darkOverlay:document.querySelector("#menu-overlay"),closeBtn:document.querySelector("[data-modal-close]"),contentWrapper:document.querySelector(".modal-content-wrapper"),furnitureList:document.querySelector(".furniture-list")};function ee(e){const{name:t,category:o,price:s,description:r,sizes:n,color:i,images:u}=e,m=u.map(c=>`<img src="${c}" alt="${t}" width="260">`).join(""),f=Array.isArray(i)?i.map(c=>`
 <span
style="display:inline-block;width:32px;height:32px;background:${c.hex||c};border-radius:50%;margin-right:16px"></span>`).join(""):'<li class="modal-color-item">—</li>';return`
    <div class="product-info-wrapper">
        <div class="modal-gallery-mobile-wrapper">
            ${m}
        </div>
        <h2 class="modal-product-title">${t}</h2>
        <p class="modal-product-category">${o.name}</p>
        <p class="modal-product-price">${s} грн</p>
        <div class="modal-rating-wrapper">
              <div id="product-rating-container"></div>
        </div>
        <div class="modal-product-details">
            <h3 class="modal-detail-heading">Колір</h3>
            <ul class="modal-color-list">${f}
            </ul>
            <p class="modal-product-description">${r}</p>
            <p class="modal-product-size">Розміри: ${n}</p>
        </div>
        <button type="button" class="modal-order-btn">Перейти до замовлення</button>
    </div>`}function te(){d.overlay.classList.add("is-open"),document.body.classList.add("modal-open"),document.darkOverlay.classList.add("is-visible")}function L(){d.overlay.classList.remove("is-open"),document.body.classList.remove("modal-open"),document.darkOverlay.classList.remove("is-visible"),d.contentWrapper.innerHTML=""}function oe(){d.closeBtn.addEventListener("click",L),d.overlay.addEventListener("click",e=>{e.target===d.overlay&&L()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&L()})}async function re(e){const t=e.target.closest(".item-btn");if(!t)return;const o=t.dataset.id;try{const s=await _(o);d.contentWrapper.innerHTML=ee(s),te()}catch(s){console.error("Failed to open modal:",s)}}function ne(){d.furnitureList.addEventListener("click",re),oe()}async function se(){try{const e=await j();O(e,!0),ne()}catch(e){console.error("Init error:",e)}}se();const l={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),body:document.querySelector("body"),form:document.querySelector(".modal-form")};l.openModalBtn.addEventListener("click",A);l.closeModalBtn.addEventListener("click",A);l.modal.addEventListener("click",ae);window.addEventListener("keydown",ie);l.form.addEventListener("submit",ce);function A(){l.modal.classList.toggle("is-open"),l.body.classList.toggle("modal-open")}function M(){l.modal.classList.remove("is-open"),l.body.classList.remove("modal-open")}function ae(e){e.target===l.modal&&M()}function ie(e){e.key==="Escape"&&l.modal.classList.contains("is-open")&&M()}function ce(e){e.preventDefault();const t=e.currentTarget,{name:o,phone:s,comment:r}=t.elements,n=r.value;F(o),F(s);let i=!0;const u=o.value.trim();u.length<2&&(I(o,"Будь ласка, введіть правильно ім'я"),i=!1);const m=s.value.trim().replace(/\s+/g,"");/^(\+?38)?0\d{9}$/.test(m)||(I(s,"Невірний формат телефону"),i=!1),i&&D({name:u,phone:m,modelId:"",color:"",comment:n}).then(c=>{console.log(c),$.success({title:"Вітаю!",message:"Ваше замовлення оформлено успішно!",position:"topRight"}),t.reset(),M()}).catch(c=>{console.error("Failed to post order.",c.message),$.error({title:"Помилка",message:`${c.message}`,position:"topRight"})})}function I(e,t){if(e.classList.add("invalid"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-text")){const o=document.createElement("p");o.className="error-text",o.textContent=t,e.insertAdjacentElement("afterend",o)}}function F(e){e.classList.remove("invalid"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-text")&&e.nextElementSibling.remove()}const a={openBtn:document.querySelector("#menu-open-btn"),closeBtn:document.querySelector("#menu-close-btn"),mobileMenu:document.querySelector("#mobile-menu-container"),mobaleNavList:document.querySelector("#mobile-nav"),navigation:document.querySelector(".navigation"),overlay:document.querySelector("#menu-overlay"),btn:document.querySelector(".btn-header")};a.openBtn.addEventListener("click",le);a.closeBtn.addEventListener("click",h);document.addEventListener("keydown",de);document.addEventListener("click",ue);a.btn.addEventListener("click",me);function le(){a.mobileMenu.classList.add("is-open"),a.navigation.classList.add("menu-active"),a.overlay.classList.add("is-visible"),document.body.style.overflow="hidden",a.openBtn.setAttribute("aria-expanded","true")}function h(){a.mobileMenu.classList.remove("is-open"),a.navigation.classList.remove("menu-active"),a.overlay.classList.remove("is-visible"),document.body.style.overflow="",a.openBtn.setAttribute("aria-expanded","false")}a.mobaleNavList.querySelectorAll("a").forEach(e=>{e.addEventListener("click",h)});function C(){a.mobileMenu.classList.contains("is-open")&&h()}function de(e){e.key==="Escape"&&C()}function ue(e){const t=a.mobileMenu.contains(e.target),o=a.openBtn.contains(e.target);!t&&!o&&C()}function me(){document.querySelector("#furniture").scrollIntoView({behavior:"smooth"}),h()}
//# sourceMappingURL=index.js.map
