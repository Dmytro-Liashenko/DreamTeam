import{A as O,a as b,S as $,R as I,i as L}from"./assets/vendor-D40M51PX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();new O(".accordion-container",{duration:300,showMultiple:!1});const C="https://furniture-store-v2.b.goit.study/api",A={FURNITURES_LIST:"/furnitures",FURNITURE_ITEM:"/furnitures/",CATEGORIES_LIST:"/categories",USERS_ORDER:"/orders",FEEDBACKS:"/feedbacks"};b.defaults.baseURL=C;async function F(e){try{return(await b.post(A.USERS_ORDER,e)).data}catch(t){throw console.error("Failed to post order.",t),new Error("Order submission failed.")}}async function T(e){try{const t={limit:10,page:e};return(await b.get(A.FEEDBACKS,{params:t})).data.feedbacks}catch(t){throw console.error("Failed to fetch feedbacks.",t),new Error("Fetch feedbacks data error")}}const P=document.querySelector(".swiper-wrapper"),N=new $(".swiper",{direction:"horizontal",loop:!1,slidesPerView:1,spaceBetween:48,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},effect:"slide",grabCursor:!0,freeMode:!0,autoHeight:!1,spaceBetween:24,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function U(){document.querySelectorAll(".rating").forEach(e=>{new I(e,{score:e.dataset.score,starSize:20,step:.5,score:e.dataset.score,readOnly:!0,numberMax:5,precision:!1,round:{down:.3,full:.7,up:.8},path:"./img/star-icons",starOn:"star-full.png",starHalf:"star-half.png",starOff})})}function j(e){return e.map(({name:t,descr:n,rate:i})=>`
    <div class="swiper-slide">
      <div class="comment-card">
        <div class="rating" data-score="${i}"></div>
        <p class="comment-descr">"${n}"</p>
        <h3 class="comment-name">${t}</h3>
      </div>
    </div>
    `).join(`
`)}function V(e){P.insertAdjacentHTML("beforeend",j(e)),U(),N.update()}let D=1;async function _(){try{const e=await T(D);V(e)}catch(e){console.log(e)}}_();function H(e,t=!1){const n=e.map(({_id:i,images:o,name:r,color:a,price:d})=>{const u=(o==null?void 0:o[0])||"https://via.placeholder.com/300x200?text=No+Image",E=Array.isArray(a)?a.map(l=>`<span style="display:inline-block;width:12px;height:12px;border-radius:50%;background:${l};margin:0 2px;"></span>`).join(""):"—";return`
        <li class="furniture-item" data-id="${i}">
          <img src="${u}" alt="${r}" style="width: 310px; height: 256px; object-fit: cover; border-radius: 8px;" />
          <h3>${r}</h3>
          <p>Кольори: ${E}</p>
          <p>Ціна: ${d} грн</p>
          <a href="/product/${i}">Детальніше</a>
        </li>
      `}).join("");t?S.innerHTML=n:S.insertAdjacentHTML("beforeend",n)}const S=document.querySelector(".furniture-list"),K=document.querySelector(".categories-list-item"),p=document.querySelector(".load-more-btn");let m=1;const w=8;let g=0,k=0,y=null;async function h(e=1,t=null){try{let n=`https://furniture-store-v2.b.goit.study/api/furnitures?page=${e}&limit=${w}`;t&&t!=="all"&&(n+=`&category=${t}`);const o=await(await fetch(n)).json(),r=o.furnitures;k=o.total,H(r,e===1),g+=r.length,g>=k||r.length<w?p.style.display="none":p.style.display="block"}catch(n){console.error("Error loading furniture:",n)}}K.addEventListener("click",e=>{const t=e.target.closest("li[data-category-id]");t&&(y=t.dataset.categoryId,m=1,g=0,h(m,y))});h();p.addEventListener("click",()=>{m++,h(m,y)});const M=document.querySelectorAll(".img-categories");M.forEach(e=>{e.addEventListener("click",()=>{M.forEach(t=>t.classList.remove("active")),e.classList.add("active")})});const c={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),body:document.querySelector("body"),form:document.querySelector(".modal-form")};c.openModalBtn.addEventListener("click",B);c.closeModalBtn.addEventListener("click",B);c.modal.addEventListener("click",z);window.addEventListener("keydown",G);c.form.addEventListener("submit",J);function B(){c.modal.classList.toggle("is-open"),c.body.classList.toggle("modal-open")}function v(){c.modal.classList.remove("is-open"),c.body.classList.remove("modal-open")}function z(e){e.target===c.modal&&v()}function G(e){e.key==="Escape"&&c.modal.classList.contains("is-open")&&v()}function J(e){e.preventDefault();const t=e.currentTarget,{name:n,phone:i,comment:o}=t.elements,r=o.value;q(n),q(i);let a=!0;const d=n.value.trim();d.length<2&&(x(n,"Будь ласка, введіть правильно ім'я"),a=!1);const u=i.value.trim().replace(/\s+/g,"");/^(\+?38)?0\d{9}$/.test(u)||(x(i,"Невірний формат телефону"),a=!1),a&&F({name:d,phone:u,modelId:"",color:"",comment:r}).then(l=>{console.log(l),L.success({title:"Вітаю!",message:"Ваше замовлення оформлено успішно!",position:"topRight"}),t.reset(),v()}).catch(l=>{console.error("Failed to post order.",l.message),L.error({title:"Помилка",message:`${l.message}`,position:"topRight"})})}function x(e,t){if(e.classList.add("invalid"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-text")){const n=document.createElement("p");n.className="error-text",n.textContent=t,e.insertAdjacentElement("afterend",n)}}function q(e){e.classList.remove("invalid"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-text")&&e.nextElementSibling.remove()}const s={openBtn:document.querySelector("#menu-open-btn"),closeBtn:document.querySelector("#menu-close-btn"),mobileMenu:document.querySelector("#mobile-menu-container"),mobaleNavList:document.querySelector("#mobile-nav"),navigation:document.querySelector(".navigation"),overlay:document.querySelector("#menu-overlay"),btn:document.querySelector(".btn-header")};s.openBtn.addEventListener("click",Q);s.closeBtn.addEventListener("click",f);document.addEventListener("keydown",W);document.addEventListener("click",X);s.btn.addEventListener("click",Y);function Q(){s.mobileMenu.classList.add("is-open"),s.navigation.classList.add("menu-active"),s.overlay.classList.add("is-visible"),document.body.style.overflow="hidden",s.openBtn.setAttribute("aria-expanded","true")}function f(){s.mobileMenu.classList.remove("is-open"),s.navigation.classList.remove("menu-active"),s.overlay.classList.remove("is-visible"),document.body.style.overflow="",s.openBtn.setAttribute("aria-expanded","false")}s.mobaleNavList.querySelectorAll("a").forEach(e=>{e.addEventListener("click",f)});function R(){s.mobileMenu.classList.contains("is-open")&&f()}function W(e){e.key==="Escape"&&R()}function X(e){const t=s.mobileMenu.contains(e.target),n=s.openBtn.contains(e.target);!t&&!n&&R()}function Y(){document.querySelector("#furniture").scrollIntoView({behavior:"smooth"}),f()}
//# sourceMappingURL=index.js.map
