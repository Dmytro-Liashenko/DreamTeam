import{A as R,a as y,S as O,R as x,i as E}from"./assets/vendor-D40M51PX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();new R(".accordion-container",{duration:300,showMultiple:!1});const A="https://furniture-store-v2.b.goit.study/api",M={FURNITURES_LIST:"/furnitures",FURNITURE_ITEM:"/furnitures/",CATEGORIES_LIST:"/categories",USERS_ORDER:"/orders",FEEDBACKS:"/feedbacks"};y.defaults.baseURL=A;async function $(e){try{return(await y.post(M.USERS_ORDER,e)).data}catch(t){throw console.error("Failed to post order.",t),new Error("Order submission failed.")}}async function C(e){try{const t={limit:10,page:e};return(await y.get(M.FEEDBACKS,{params:t})).data.feedbacks}catch(t){throw console.error("Failed to fetch feedbacks.",t),new Error("Fetch feedbacks data error")}}const F=document.querySelector(".swiper-wrapper"),I=new O(".swiper",{direction:"horizontal",loop:!1,slidesPerView:1,spaceBetween:48,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},effect:"slide",grabCursor:!0,freeMode:!0,autoHeight:!1,spaceBetween:24,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function P(){document.querySelectorAll(".rating").forEach(e=>{new x(e,{score:e.dataset.score,starSize:20,step:.5,score:e.dataset.score,readOnly:!0,numberMax:5,precision:!1,round:{down:.3,full:.7,up:.8},path:"./img/star-icons",starOn:"star-full.png",starHalf:"star-half.png",starOff})})}function T(e){return e.map(({name:t,descr:n,rate:i})=>`
    <div class="swiper-slide">
      <div class="comment-card">
        <div class="rating" data-score="${i}"></div>
        <p class="comment-descr">"${n}"</p>
        <h3 class="comment-name">${t}</h3>
      </div>
    </div>
    `).join(`
`)}function N(e){F.insertAdjacentHTML("beforeend",T(e)),P(),I.update()}let U=1;async function V(){try{const e=await C(U);N(e)}catch(e){console.log(e)}}V();function _(e){const t=document.querySelector(".furniture-list"),n=e.map(({id:i,image:o,name:r,color:c,price:l})=>`
      <li class="furniture-card">
        <img src="${o}" alt="${r}" />
        <h3>${r}</h3>
        <p>Колір: ${c}</p>
        <p>Ціна: ${l} ₴</p>
        <button class="details-btn" data-id="${i}">Детальніше</button>
      </li>`).join("");t.insertAdjacentHTML("beforeend",n)}document.querySelector(".furniture-list");const j=document.querySelector(".categories-list-item"),f=document.querySelector(".load-more-btn");let u=1;const L=8;let p=0,S=0,g=null;async function b(e=1,t=null){try{let n=`https://furniture-store-v2.b.goit.study/api/furnitures?page=${e}&limit=${L}`;t&&t!=="all"&&(n+=`&category=${t}`);const o=await(await fetch(n)).json(),r=o.furnitures;S=o.total,_(r,e===1),p+=r.length,p>=S||r.length<L?f.style.display="none":f.style.display="block"}catch(n){console.error("Error loading furniture:",n)}}j.addEventListener("click",e=>{const t=e.target.closest("li[data-category-id]");t&&(g=t.dataset.categoryId,u=1,p=0,b(u,g))});b();f.addEventListener("click",()=>{u++,b(u,g)});const a={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),body:document.querySelector("body"),form:document.querySelector(".modal-form")};a.openModalBtn.addEventListener("click",q);a.closeModalBtn.addEventListener("click",q);a.modal.addEventListener("click",D);window.addEventListener("keydown",H);a.form.addEventListener("submit",K);function q(){a.modal.classList.toggle("is-open"),a.body.classList.toggle("modal-open")}function v(){a.modal.classList.remove("is-open"),a.body.classList.remove("modal-open")}function D(e){e.target===a.modal&&v()}function H(e){e.key==="Escape"&&a.modal.classList.contains("is-open")&&v()}function K(e){e.preventDefault();const t=e.currentTarget,{name:n,phone:i,comment:o}=t.elements,r=o.value;k(n),k(i);let c=!0;const l=n.value.trim();l.length<2&&(w(n,"Будь ласка, введіть правильно ім'я"),c=!1);const h=i.value.trim().replace(/\s+/g,"");/^(\+?38)?0\d{9}$/.test(h)||(w(i,"Невірний формат телефону"),c=!1),c&&$({name:l,phone:h,modelId:"",color:"",comment:r}).then(d=>{console.log(d),E.success({title:"Вітаю!",message:"Ваше замовлення оформлено успішно!",position:"topRight"}),t.reset(),v()}).catch(d=>{console.error("Failed to post order.",d.message),E.error({title:"Помилка",message:`${d.message}`,position:"topRight"})})}function w(e,t){if(e.classList.add("invalid"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("error-text")){const n=document.createElement("p");n.className="error-text",n.textContent=t,e.insertAdjacentElement("afterend",n)}}function k(e){e.classList.remove("invalid"),e.nextElementSibling&&e.nextElementSibling.classList.contains("error-text")&&e.nextElementSibling.remove()}const s={openBtn:document.querySelector("#menu-open-btn"),closeBtn:document.querySelector("#menu-close-btn"),mobileMenu:document.querySelector("#mobile-menu-container"),mobaleNavList:document.querySelector("#mobile-nav"),navigation:document.querySelector(".navigation"),overlay:document.querySelector("#menu-overlay"),btn:document.querySelector(".btn-header")};s.openBtn.addEventListener("click",z);s.closeBtn.addEventListener("click",m);document.addEventListener("keydown",G);document.addEventListener("click",J);s.btn.addEventListener("click",Q);function z(){s.mobileMenu.classList.add("is-open"),s.navigation.classList.add("menu-active"),s.overlay.classList.add("is-visible"),document.body.style.overflow="hidden",s.openBtn.setAttribute("aria-expanded","true")}function m(){s.mobileMenu.classList.remove("is-open"),s.navigation.classList.remove("menu-active"),s.overlay.classList.remove("is-visible"),document.body.style.overflow="",s.openBtn.setAttribute("aria-expanded","false")}s.mobaleNavList.querySelectorAll("a").forEach(e=>{e.addEventListener("click",m)});function B(){s.mobileMenu.classList.contains("is-open")&&m()}function G(e){e.key==="Escape"&&B()}function J(e){const t=s.mobileMenu.contains(e.target),n=s.openBtn.contains(e.target);!t&&!n&&B()}function Q(){document.querySelector("#furniture").scrollIntoView({behavior:"smooth"}),m()}
//# sourceMappingURL=index.js.map
