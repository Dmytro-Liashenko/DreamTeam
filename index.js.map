{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/Order-Modal.js","../src/js/header.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = 'https://furniture-store-v2.b.goit.study/api';\r\nconst API_ENDPOINTS = {\r\n  FURNITURES_LIST: '/furnitures',\r\n  FURNITURE_ITEM: '/furnitures/',\r\n  CATEGORIES_LIST: '/categories',\r\n  USERS_ORDER: '/orders',\r\n  FEEDBACKS: '/feedbacks',\r\n};\r\n\r\naxios.defaults.baseURL = API_BASE_URL;\r\n\r\nexport async function getFurnituresList(categoryID) {\r\n  const params = {\r\n    category: categoryID,\r\n  };\r\n\r\n  try {\r\n    const response = await axios.get(API_ENDPOINTS.FURNITURES_LIST, { params });\r\n    return response.data.furnitures;\r\n  } catch (error) {\r\n    console.error('Failed to fetch furniture list.', error);\r\n    throw new Error('Failed to load furniture list.');\r\n  }\r\n}\r\n\r\nexport async function getFurnituresID(id) {\r\n  try {\r\n    const response = await axios.get(`${API_ENDPOINTS.FURNITURE_ITEM}${id}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Failed to fetch furniture item.', error);\r\n    throw new Error('Item not found.');\r\n  }\r\n}\r\n\r\nexport async function getPopularItems() {\r\n  try {\r\n    const params = {\r\n      type: \"popular\",\r\n      limit: 3,\r\n    }\r\n\r\n    const response = await axios.get(API_ENDPOINTS.FURNITURES_LIST, { params })\r\n    return response.data.furnitures\r\n  } catch (error) {\r\n    console.error('Failed to fetch popular furniture items:', error);\r\n    throw new Error('Failed to load popular items.');\r\n  }\r\n}\r\n\r\nexport async function getCategory() {\r\n  try {\r\n    const response = await axios.get(API_ENDPOINTS.CATEGORIES_LIST);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Failed to fetch categories.', error);\r\n    throw new Error('Failed to load categories.');\r\n  }\r\n}\r\n\r\nexport async function postUsersOrder(orderData) {\r\n  try {\r\n    const response = await axios.post(API_ENDPOINTS.USERS_ORDER, orderData);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Failed to post order.', error);\r\n    throw new Error('Order submission failed.');\r\n  }\r\n}\r\n\r\nexport async function getFeedback(page) {\r\n  try {\r\n    const params = {\r\n      limit: 3,\r\n      page,\r\n    };\r\n\r\n    const response = await axios.get(API_ENDPOINTS.FEEDBACKS, { params });\r\n    return response.data.feedbacks;\r\n  } catch (error) {\r\n    console.error('Failed to fetch feedbacks.', error);\r\n    throw new Error('Fetch feedbacks data error')\r\n    \r\n  }\r\n}\r\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { postUsersOrder } from './products-api';\n\nconst refs = {\n  openModalBtn: document.querySelector('[data-modal-open]'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  modal: document.querySelector('[data-modal]'),\n  body: document.querySelector('body'),\n  form: document.querySelector('.modal-form'),\n};\n\nrefs.openModalBtn.addEventListener('click', toggleModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\nrefs.modal.addEventListener('click', onModalClick);\nwindow.addEventListener('keydown', onEscClick);\nrefs.form.addEventListener('submit', onFormSubmit);\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-open');\n  refs.body.classList.toggle('modal-open');\n}\n\nfunction closeModal() {\n  refs.modal.classList.remove('is-open');\n  refs.body.classList.remove('modal-open');\n}\n\nfunction onModalClick(event) {\n  if (event.target === refs.modal) closeModal();\n}\n\nfunction onEscClick(event) {\n  if (event.key === 'Escape' && refs.modal.classList.contains('is-open')) {\n    closeModal();\n  }\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const { name: nameInput, phone: phoneInput, comment } = form.elements;\n  const commentValue = comment.value;\n\n  clearError(nameInput);\n  clearError(phoneInput);\n\n  let isValid = true;\n  const nameValue = nameInput.value.trim();\n\n  if (nameValue.length < 2) {\n    showError(nameInput, \"Будь ласка, введіть правильно ім'я\");\n    isValid = false;\n  }\n\n  const phoneValue = phoneInput.value.trim().replace(/\\s+/g, '');\n  const phoneRegex = /^(\\+?38)?0\\d{9}$/;\n\n  if (!phoneRegex.test(phoneValue)) {\n    showError(phoneInput, 'Невірний формат телефону');\n    isValid = false;\n  }\n\n  if (!isValid) return;\n\n  postUsersOrder({\n    name: nameValue,\n    phone: phoneValue,\n    modelId: '',\n    color: '',\n    comment: commentValue,\n  })\n    .then(res => {\n      console.log(res);\n      iziToast.success({\n        title: 'Вітаю!',\n        message: 'Ваше замовлення оформлено успішно!',\n        position: 'topRight',\n      });\n      form.reset();\n      closeModal();\n    })\n    .catch(error => {\n      console.error('Failed to post order.', error.message);\n      iziToast.error({\n        title: 'Помилка',\n        message: `${error.message}`,\n        position: 'topRight',\n      });\n    });\n}\n\nfunction showError(input, message) {\n  input.classList.add('invalid');\n\n  if (\n    !input.nextElementSibling ||\n    !input.nextElementSibling.classList.contains('error-text')\n  ) {\n    const error = document.createElement('p');\n    error.className = 'error-text';\n    error.textContent = message;\n    input.insertAdjacentElement('afterend', error);\n  }\n}\n\nfunction clearError(input) {\n  input.classList.remove('invalid');\n  if (\n    input.nextElementSibling &&\n    input.nextElementSibling.classList.contains('error-text')\n  ) {\n    input.nextElementSibling.remove();\n  }\n}\n","const refs = {\n  openBtn: document.querySelector('#menu-open-btn'),\n  closeBtn: document.querySelector('#menu-close-btn'),\n  mobileMenu: document.querySelector('#mobile-menu-container'),\n  mobaleNavList: document.querySelector('#mobile-nav'),\n  navigation: document.querySelector('.navigation'),\n  overlay: document.querySelector('#menu-overlay'),\n  btn: document.querySelector('.btn-header'),\n};\n\nrefs.openBtn.addEventListener('click', openMobileMenu);\nrefs.closeBtn.addEventListener('click', closeMobileMenu);\ndocument.addEventListener('keydown', handleEscKeyClose);\ndocument.addEventListener('click', handleOutsideClick);\nrefs.btn.addEventListener('click', scrollToFurniture);\n\nfunction openMobileMenu() {\n  refs.mobileMenu.classList.add('is-open');\n  refs.navigation.classList.add('menu-active');\n  refs.overlay.classList.add('is-visible');\n\n  document.body.style.overflow = 'hidden';\n  refs.openBtn.setAttribute('aria-expanded', 'true');\n}\n\nfunction closeMobileMenu() {\n  refs.mobileMenu.classList.remove('is-open');\n  refs.navigation.classList.remove('menu-active');\n  refs.overlay.classList.remove('is-visible');\n\n  document.body.style.overflow = '';\n  refs.openBtn.setAttribute('aria-expanded', 'false');\n}\n\nrefs.mobaleNavList.querySelectorAll('a').forEach(link => {\n  link.addEventListener('click', closeMobileMenu);\n});\n\nfunction handleCloseIfOpen() {\n  if (refs.mobileMenu.classList.contains('is-open')) {\n    closeMobileMenu();\n  }\n}\n\nfunction handleEscKeyClose(event) {\n  if (event.key === 'Escape') {\n    handleCloseIfOpen();\n  }\n}\n\nfunction handleOutsideClick(evt) {\n  const isClickInsideMenu = refs.mobileMenu.contains(evt.target);\n  const isClickOnOpenBtn = refs.openBtn.contains(evt.target);\n\n  if (!isClickInsideMenu && !isClickOnOpenBtn) {\n    handleCloseIfOpen();\n  }\n}\n\nfunction scrollToFurniture() {\n  const targetSection = document.querySelector('#furniture');\n\n  targetSection.scrollIntoView({\n    behavior: 'smooth',\n  });\n  closeMobileMenu();\n}\n"],"names":["API_BASE_URL","API_ENDPOINTS","axios","postUsersOrder","orderData","error","refs","toggleModal","onModalClick","onEscClick","onFormSubmit","closeModal","event","form","nameInput","phoneInput","comment","commentValue","clearError","isValid","nameValue","showError","phoneValue","res","iziToast","input","message","openMobileMenu","closeMobileMenu","handleEscKeyClose","handleOutsideClick","scrollToFurniture","link","handleCloseIfOpen","evt","isClickInsideMenu","isClickOnOpenBtn"],"mappings":"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"}